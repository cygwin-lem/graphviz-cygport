--- origsrc/graphviz-2.40.1/configure.ac	2017-04-02 18:04:24.518167700 -0500
+++ src/graphviz-2.40.1/configure.ac	2017-04-02 18:27:18.576319700 -0500
@@ -1510,6 +1510,66 @@ fi
 AM_CONDITIONAL(WITH_PYTHON27, [test "x$use_python27" = "xYes"])
 
 dnl -----------------------------------
+dnl INCLUDES and LIBS for PYTHON3
+
+AC_ARG_ENABLE(python3,
+  [AS_HELP_STRING([--enable-python3=no],[python3 language bindings])],
+  [], [enable_python3=no])
+
+if test "x$enable_python3" != "xyes"; then
+  use_python3="No (disabled)"
+else
+  if test "x$use_swig" != "xYes"; then
+    use_python3="No (swig not available)"
+  else
+    if test `$SWIG -help 2>&1 | $EGREP -c '\-python *- Generate'` = 0; then
+      use_python3="No (swig does not support -python option)"
+    else
+      AC_CHECK_PROG(PYTHON3,python3,python3)
+      if test "x$PYTHON3" = "x"; then
+        use_python3="No (python3 not available)"
+      else
+        PYTHON3_VERSION=`$PYTHON3 -V 2>&1 | $EGREP Python | cut -d ' ' -f 2`
+        if test "x$PYTHON3_VERSION" = "x"; then
+          PYTHON3=
+        else
+          PYTHON3_VERSION_MAJOR=`echo $PYTHON3_VERSION | cut -d '.' -f 1`
+          PYTHON3_VERSION_MINOR=`echo $PYTHON3_VERSION | cut -d '.' -f 2`
+          PYTHON3_VERSION_SHORT=$PYTHON3_VERSION_MAJOR.$PYTHON3_VERSION_MINOR
+          if test $PYTHON3_VERSION_MAJOR -lt 3; then
+            if test $PYTHON3_VERSION_MINOR -lt 4; then
+	          PYTHON3=
+            fi
+          fi
+        fi
+      fi
+      if test "x$PYTHON3" = "x"; then
+	    use_python3="No (python3 is too old)"
+      else
+        PYTHON3_PREFIX=`$PYTHON3 -c "import sys; print sys.prefix"`
+        PYTHON3_INCLUDES=-I/usr/include/python${PYTHON3_VERSION_SHORT}m
+        PYTHON3_LIBS="-lpython${PYTHON3_VERSION_SHORT}m"
+        PYTHON3_INSTALL_DIR="`$PYTHON3 $srcdir/config/config_python.py archsitelib`"
+        save_CPPFLAGS=$CPPFLAGS
+        CPPFLAGS="$CPPFLAGS $PYTHON3_INCLUDES"
+        AC_CHECK_HEADER(Python.h,,[
+          use_python3="No (missing header)"
+          PYTHON3=
+        ])
+        CPPFLAGS=$save_CPPFLAGS
+	if test "x$PYTHON3" != "x"; then
+	  use_python3="Yes"
+          AC_SUBST([PYTHON3_INSTALL_DIR])
+          AC_SUBST([PYTHON3_INCLUDES])
+          AC_SUBST([PYTHON3_LIBS])
+        fi
+      fi
+    fi
+  fi
+fi
+AM_CONDITIONAL(WITH_PYTHON3, [test "x$use_python3" = "xYes"])
+
+dnl -----------------------------------
 dnl INCLUDES and LIBS for PYTHON34
 
 AC_ARG_ENABLE(python34,
@@ -3331,6 +3391,7 @@ echo "  gv_python24:   $use_python24"
 echo "  gv_python25:   $use_python25"
 echo "  gv_python26:   $use_python26"
 echo "  gv_python27:   $use_python27"
+echo "  gv_python3:    $use_python3"
 echo "  gv_python34:   $use_python34"
 echo "  gv_R:          $use_r"
 echo "  gv_ruby:       $use_ruby"
--- origsrc/graphviz-2.40.1/config/config_python.py	2016-08-09 16:02:10.000000000 -0500
+++ src/graphviz-2.40.1/config/config_python.py	2017-04-02 18:42:28.398617000 -0500
@@ -1,12 +1,13 @@
+from __future__ import print_function
 import sys
 from distutils import sysconfig
 
 if sys.argv[1] == "archlib":
-    print sysconfig.get_python_lib(1,1)
+    print (sysconfig.get_python_lib(1,1))
 elif sys.argv[1] == "lib":
-    print sysconfig.get_python_lib(0,1)
+    print (sysconfig.get_python_lib(0,1))
 elif sys.argv[1] == "archsitelib":
-    print sysconfig.get_python_lib(1,0)
+    print (sysconfig.get_python_lib(1,0))
 elif sys.argv[1] == "sitelib":
-    print sysconfig.get_python_lib(0,0)
+    print (sysconfig.get_python_lib(0,0))
 
--- origsrc/graphviz-2.40.1/tclpkg/gv/Makefile.am	2017-04-02 18:04:24.301074200 -0500
+++ src/graphviz-2.40.1/tclpkg/gv/Makefile.am	2017-04-02 18:25:38.027155500 -0500
@@ -249,6 +249,17 @@ libgv_python27_la_CPPFLAGS = $(BASECPPFL
 gv_python27.cpp: gv.i
 	$(SWIG) -c++ -python -o gv_python27.cpp $(srcdir)/gv.i
 
+pkgpython3dir = $(pkglibdir)/python3
+PYTHON3_data = gv.py
+nodist_libgv_python3_la_SOURCES = gv_python3.cpp $(PYTHON3_data)
+libgv_python3_la_SOURCES = $(BASESOURCES) gv_dummy_init.c
+libgv_python3_la_LIBADD = $(BASELIBS) $(PYTHON3_LIBS)
+libgv_python3_la_LDFLAGS = -module -avoid-version
+libgv_python3_la_CPPFLAGS = $(BASECPPFLAGS) $(PYTHON3_INCLUDES)
+# $(PYTHON3_data): gv_python3.cpp
+gv_python3.cpp: gv.i
+	$(SWIG) -c++ -python -o gv_python3.cpp $(srcdir)/gv.i
+
 pkgpython34dir = $(pkglibdir)/python34
 PYTHON34_data = gv.py
 nodist_libgv_python34_la_SOURCES = gv_python34.cpp $(PYTHON34_data)
@@ -404,6 +415,13 @@ py_data = gv.3python.pdf
 pkgpython27_LTLIBRARIES = libgv_python27.la
 #DEVTSTS += test_python27
 endif
+if WITH_PYTHON3
+pkgpython3_DATA = $(PYTHON3_data)
+py_mans = gv.3python
+py_data = gv.3python.pdf
+pkgpython3_LTLIBRARIES = libgv_python3.la
+#DEVTSTS += test_python3
+endif
 if WITH_PYTHON34
 pkgpython34_DATA = $(PYTHON34_data)
 py_mans = gv.3python
@@ -522,6 +540,9 @@ endif
 if WITH_PYTHON27
 	(cd $(DESTDIR)$(pkgpython27dir); rm -f _gv.so; $(LN_S) libgv_python27.so _gv.so;)
 endif
+if WITH_PYTHON3
+	(cd $(DESTDIR)$(pkgpython3dir); rm -f _gv.so; $(LN_S) libgv_python3.so _gv.so;)
+endif
 if WITH_PYTHON34
 	(cd $(DESTDIR)$(pkgpython34dir); rm -f _gv.so; $(LN_S) libgv_python34.so _gv.so;)
 endif
@@ -651,6 +672,7 @@ CLEANFILES = test_*/* pkgIndex.tcl \
 	gv_python25.cpp $(PYTHON25_data) gv.pyc \
 	gv_python26.cpp $(PYTHON26_data) gv.pyc \
 	gv_python27.cpp $(PYTHON27_data) gv.pyc \
+	gv_python3.cpp $(PYTHON3_data) gv.pyc \
 	gv_python34.cpp $(PYTHON34_data) gv.pyc \
 	gv_R.cpp $(R_data) \
 	gv_ruby.cpp $(RUBY_data) \
